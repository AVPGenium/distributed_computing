# Hadoop cluster

## Архитектура

Веб-админка NameNode: http://name-node:9870

## Установка и настройка

### Установка VM
Инструкция для пользователей Windows.

1) Необязательный шаг (можно сделать позже) - набрать в поисковике cloudera.com  и зарегистрироваться на сайте clouder'ы введя почту, имя, и дождавшись сообщения в эту самую почту для установки и активации пароля от аккаунта. Залогиниться.

2) Установить на свой компьютер программу Oracle Virtual Box (https://www.virtualbox.org/wiki/Downloads) - это штука для развертывания на своем компьютере (физической машине) виртуальной машины (некоего образа Linux со своим рабочим столом, конфигурацией и проч) в отдельном окошке. Мой комп работает на Windows - я выбираю по приведенной выше ссылке  "VirtualBox 6.1.10 platform packages -->  Windows hosts". Скачивается .exe-файл, утсанавливаю в нужную папку и перехожу к следующему шагу.

2) Предлагаю сразу по ссылке, где скачивали Oracle Virtual Box скачать Oracle Virtual Box VM Extension Pack - это плагин, который нужен для создания сервера для удаленного подключения (в данном случае "удаленной машины" с Hadoop).

3) Набрать в поисковой строке Hortonworks Sandbox,  перейти по первой ссылке (https://www.cloudera.com/downloads/hortonworks-sandbox.html) и и под продуктом *Hortonworks HDP* нажать на кнопку "Download now" , перекинет на страницу, где нужно будет выбрать параметры загрузки. Выбираю дистрибутив под Virtualbox (для этого и устанавливали его выше), соглашаюсь с лицензией, жду час пока скачается 20 Гб пре-конфигурированной виртуальной машины.

4) Запускаю программу Virtual Box, которые устанавливали в п.2, далее "Файл" -- > "Импорт конфигураций" --> "Экспертный режим" --> указываем путь к скачанному Hortonworks HDP и папку где будут храниться файлы для разворачиваемой машины (где побольше места) --> "Импорт" --> Ждем полчаса.

5) Если у вас стоит КриптоПро на компьютере, то Virtual Box будет конфликтовать и всё выльется в синий экран смерти. Поэтому запускать импортированную конфигурацию Hortonworks нужно в фоновом режиме (выделить конфигурацию, затем рядом с зелёной стрелкой выбрать соответствующий фоновый режим запуска).

6) Машина запустится (можно увидеть в превью, что происходят какие-то процессы), затем нужно нажать на зелёную стрелку "Посмотреть" и дождаться пока консоль обработает все процессы и появятся URL-ссылка, которую нужно будет набрать в адресной строке любого браузера (у меня это http://localhost:1080)

7) Откроется страница Hortonworks Sandbox, где на выбор два пути - для чайников и для опытных

**логин maria_dev, пароль maria_dev**.

Также рекомендую включить всплывающие окна и ознакомиться с  https://www.cloudera.com/tutorials/getting-started-with-hdp-sandbox.html и https://www.cloudera.com/tutorials/how-to-process-data-with-apache-hive.html

Наконец, забыл отметить, что после импорта конфигурации (пункт 4), можно будет изменить настройки выделяемой виртуальной машине оперативной памяти, процессоров и проч. (рекомендую сделать, иначе комп будет виснуть/глючить и проч. Например, стандартно Hprtonworks Sandbox требует 10 Гб оперативки RAM и 4 процессора, у меня на компе всего 12 Гб оперативки и 2 процессора, поэтому я выставил 1 процессор и 8 Гб оперативки, и все работает)

### Установка Docker

docker-compose file: [docker-compose.yml](docker-compose.yml).

структура кластера:
- 1 NameNode
- 1 DataNode
- 1 HistoryServer
- 1 NodeManager
- 1 ResourseManager
- 1 HBase (*)